(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),o=n(6),r=n.n(o),i=(n(15),n(9)),l=n(2);var u=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:"data:image/png;base64,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",className:"header__logo",alt:"\u043b\u043e\u0433\u043e"})})},d=s.a.createContext();var p=function(e){var t=s.a.useContext(d),n=e.card.owner._id===t._id,c="element__delete ".concat(n?"":"element__delete_hidden"),o=e.card.likes.some((function(e){return e._id===t._id})),r="element__like ".concat(o?"element__like_active":"");return Object(a.jsxs)("li",{className:"element__group",children:[Object(a.jsx)("button",{className:c,onClick:function(){e.onCardDelete(e.card)}}),Object(a.jsx)("img",{src:e.card.link,alt:e.card.name,className:"element__image",onClick:function(){e.onCardClick(e.card)}}),Object(a.jsxs)("div",{className:"element__all",children:[Object(a.jsx)("h2",{className:"element__text",children:e.card.name}),Object(a.jsxs)("div",{className:"element__container",children:[Object(a.jsx)("button",{className:r,onClick:function(){e.onCardLike(e.card)}}),Object(a.jsx)("span",{className:"element__like-counter",children:e.card.likes.length})]})]})]})};var j=function(e){var t=s.a.useContext(d);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__block",children:[Object(a.jsxs)("div",{className:"profile__avatar-container",children:[Object(a.jsx)("img",{src:t.avatar,alt:"\u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"}),Object(a.jsx)("div",{className:"profile__avatar-edit",onClick:e.onEditAvatar})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__all",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{className:"profile__edit",type:"button",onClick:e.onEditProfile})]}),Object(a.jsx)("p",{className:"profile__text",children:t.about})]})]}),Object(a.jsx)("button",{className:"profile__button-add",type:"button",onClick:e.onAddPlace})]}),Object(a.jsx)("section",{className:"element",children:Object(a.jsx)("ul",{className:"element__list",children:e.cards.map((function(t){return Object(a.jsx)(p,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var h=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__text",children:["\xa9",(new Date).getFullYear()," Mesto Russia"]})})};var m=function(e){return Object(a.jsx)("div",{className:e.isOpen?"popup popup__content_".concat(e.name," popup_opened"):"popup popup__content_".concat(e.name),children:Object(a.jsxs)("form",{className:"popup__content popup__content_".concat(e.name),onSubmit:e.onSubmit,name:"formProfile",noValidate:!0,children:[e.title,Object(a.jsx)("div",{className:"popup__close",onClick:e.onClose}),Object(a.jsxs)("fieldset",{className:"popup__fieldset popup__fieldset_profile",children:[Object(a.jsx)("div",{children:e.children}),Object(a.jsx)("button",{type:"submit",className:"popup__save",children:e.button})]})]})})};var f=function(e){return Object(a.jsx)("div",{className:"popup popup_image ".concat(e.card.link&&"popup_opened"),children:Object(a.jsxs)("form",{className:"popup__image",children:[Object(a.jsx)("div",{className:"popup__close popup__close_image",onClick:e.onClose}),Object(a.jsxs)("figure",{className:"element__image-content",children:[Object(a.jsx)("img",{src:e.card.link,className:"element__image-screen",alt:e.card.name}),Object(a.jsx)("p",{className:"element__image-name",children:e.card.name})]})]})})},_=n(7),b=n(8),O=new(function(){function e(t){Object(_.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(b.a)(e,[{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"setUserData",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"removeCard",value:function(e){var t=e._id;return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){console.log(e)})):fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeSet",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"likeRemove",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-16",headers:{authorization:"cce65d1e-fda6-465b-9ce4-eb05b78869dc","Content-Type":"application/json"}});var v=function(e){var t=s.a.useState(""),n=Object(l.a)(t,2),c=n[0],o=n[1],r=s.a.useState(""),i=Object(l.a)(r,2),u=i[0],p=i[1],j=s.a.useContext(d);return s.a.useEffect((function(){o(j.name),p(j.about)}),[j]),Object(a.jsx)(m,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,about:u})},onClose:e.onClose,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",id:"popup__field_name",className:"popup__field popup__field_name",minLength:"2",maxLength:"40",required:!0,value:c||"",onChange:function(e){o(e.target.value)}}),Object(a.jsx)("span",{className:"popup__field_error popup__field_name_error"}),Object(a.jsx)("input",{type:"text",id:"popup__field_text",className:"popup__field popup__field_text",minLength:"2",maxLength:"200",required:!0,value:u||"",onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{className:"popup__field_error popup__field_text_error"})]})})};var x=function(e){var t=s.a.useRef();return Object(a.jsx)(m,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},onClose:e.onClose,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"url",id:"popup__field_avatar",className:"popup__field popup__field_avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,ref:t}),Object(a.jsx)("span",{className:"popup__field_error popup__field_avatar_error"})]})})};var g=function(e){var t=s.a.useState(""),n=Object(l.a)(t,2),c=n[0],o=n[1],r=s.a.useState(""),i=Object(l.a)(r,2),u=i[0],d=i[1];return Object(a.jsx)(m,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"mesto",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c,link:u})},onClose:e.onClose,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",id:"popup__field_mesto-name",className:"popup__field popup__field_mesto-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",required:!0,onChange:function(e){o(e.target.value)},value:c}),Object(a.jsx)("span",{className:"popup__field_error popup__field_mesto-name_error"}),Object(a.jsx)("input",{type:"url",id:"popup__field_mesto-text",className:"popup__field popup__field_mesto-text",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:function(e){d(e.target.value)},value:u}),Object(a.jsx)("span",{className:"popup__field_error popup__field_mesto-text_error"})]})})};var C=function(){var e=s.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=s.a.useState(!1),r=Object(l.a)(o,2),p=r[0],_=r[1],b=s.a.useState(!1),C=Object(l.a)(b,2),k=C[0],A=C[1],P=s.a.useState({name:"",link:""}),N=Object(l.a)(P,2),y=N[0],D=N[1],w=s.a.useState({}),U=Object(l.a)(w,2),S=U[0],T=U[1],L=s.a.useState([]),E=Object(l.a)(L,2),Y=E[0],M=E[1];s.a.useEffect((function(){O.getInitialCards().then((function(e){M(e)})).catch((function(e){console.log(e)}))}),[]),s.a.useEffect((function(){O.getUserData().then((function(e){T(e)})).catch((function(e){console.log(e)}))}),[]);var R=function(){_(!1),c(!1),A(!1),D({name:"",link:""})};return Object(a.jsx)(d.Provider,{value:S,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(u,{}),Object(a.jsx)(j,{onEditProfile:function(){c(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){A(!0)},onCardClick:function(e){D(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===S._id}));O.changeLikeCardStatus(e._id,!t).then((function(t){var n=Y.map((function(n){return n._id===e._id?t:n}));M(n)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){O.removeCard(e).then((function(){var t=Y.filter((function(t){return t._id!==e._id}));M(t)})).catch((function(e){console.log(e)}))},closeAllPopups:R,cards:Y}),Object(a.jsx)(h,{}),Object(a.jsx)(v,{isOpen:n,onClose:R,onUpdateUser:function(e){O.setUserData(e).then((function(e){T(e),R()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(g,{isOpen:p,onClose:R,onAddPlace:function(e){O.addCard(e).then((function(e){M([e].concat(Object(i.a)(Y)))})).then((function(){R()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(x,{isOpen:k,onClose:R,onUpdateAvatar:function(e){O.setUserAvatar(e).then((function(e){T(e),R()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(m,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirmation"}),Object(a.jsx)(f,{card:y,onClose:R})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.e2775fb1.chunk.js.map